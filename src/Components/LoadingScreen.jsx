import React, { useEffect, useState, useRef } from "react"
import { styles } from "../style"
import { motion } from "framer-motion"

const LoadingScreen = () => {
    const [show, setShow] = useState(true)
    const [showBg, setShowBg] = useState(true)
    const [progress, setProgress] = useState(0);

    const pathVariants = {
        hidden: {
            pathLength: 0,
            opacity: 0,

        },
        visible: {
            pathLength: progress,
            opacity: 1,

        }
    };



    useEffect(() => {


        const handleLoad = () => {
            setShowBg(setInterval(() => {
                setProgress((prevProgress) => {
                    const random = Math.random() * 0.1
                    if (prevProgress < 1) {
                        return prevProgress + random;

                    } else {
                        setShow(false)
                        setTimeout(() => {
                            setShowBg(false)
                        }, 2000);
                    }
                })
            }, 100))

        };


        window.addEventListener('load', handleLoad);

        return () => {
            window.removeEventListener('load', handleLoad);

        };
    }, [])




    return (
        <>

            <motion.div
                className={showBg ? "fixed inset-0 bg-gradient-to-tr from-[#2c4c82] to-[#052222] font-serif " : 'hidden'}
                animate={{ opacity: show ? 1 : 0 }}
                transition={{ delay: 0 }}
            >
                <motion.div className="flex flex-col items-center justify-center h-screen">
                    <div className={`flex items-center  ${styles.sectionHeadText}`}>
                        <h1 className="">DO</h1>
                        <motion.svg width="100" height="100" viewBox="0 0 800 800" fill="rgba(255, 255, 255, 1)" xmlns="http://www.w3.org/2000/svg">
                            <motion.path
                                initial={{
                                    pathLength: 0,
                                    opacity: 0,
                                    fill: 'rgba(255, 255, 255, 0)'
                                }}
                                animate={{
                                    pathLength: 1,
                                    opacity: 1,
                                    fill: 'rgba(255, 255, 255, 1)'
                                }}
                                transition={{
                                    default: { duration: 2, ease: "easeInOut" },
                                    fill: { duration: 3, ease: [1, 0, 0.8, 1] }
                                }}
                                d="M389.645 697.148C389.576 697.501 389.746 697.754 389.874 697.753C389.776 697.947 389.777 697.947 389.777 697.948L389.778 697.948L389.781 697.95L389.794 697.956L389.84 697.978C389.879 697.997 389.938 698.025 390.013 698.06C390.075 698.089 390.148 698.123 390.232 698.161C390.353 698.216 390.497 698.28 390.662 698.35C391.22 698.589 392.014 698.907 392.967 699.224C394.867 699.858 397.424 700.5 400 700.5C402.585 700.5 415.255 700.475 427.884 685.32L427.892 685.31L427.9 685.3C435.479 675.194 445.506 655.073 442.999 614.969L442.963 614.397L442.402 614.51C429.906 617.009 414.947 619.5 402.5 619.5H402.488L402.476 619.501C350.1 621.995 302.743 604.536 270.354 572.146L270.346 572.139L270.338 572.131C240.443 544.728 225.504 507.366 225.5 475.012C227.993 422.78 265.298 377.908 337.738 335.44C345.408 331.603 353.085 326.298 359.61 321.79C361.62 320.401 363.52 319.088 365.277 317.916L365.577 317.716L365.482 317.368C361.732 303.616 357.984 288.627 353.612 271.135C349.238 253.64 344.239 233.642 337.984 209.876C325.52 160.014 336.12 123.291 354.47 97.4772C372.809 71.6785 398.915 56.739 417.581 50.5C424.997 50.5 429.907 50.5108 437.241 52.9409C437.468 53.1367 437.858 53.4006 438.339 53.7168C438.594 53.8844 438.887 54.0743 439.214 54.286L439.35 54.3745C439.733 54.6226 440.16 54.8999 440.629 55.2079C442.502 56.4392 445.041 58.1606 448.017 60.4362C453.968 64.9876 461.672 71.7571 469.298 81.2506C484.544 100.231 499.5 130.122 499.5 175C499.5 242.35 474.567 294.717 424.666 339.628L424.422 339.847L424.526 340.158C427.019 347.637 428.889 355.118 430.765 362.621L430.767 362.63C432.641 370.124 434.52 377.64 437.026 385.158L437.208 385.705L437.724 385.447C440.191 384.213 442.018 383.608 443.832 383.306C445.659 383.001 447.49 383 450 383H450.026L450.052 382.997C497.383 378.015 527.25 395.445 544.671 410.377C567.043 430.265 574.5 457.616 574.5 475C574.5 534.747 537.173 574.602 489.786 597.048L489.469 597.198L489.502 597.547C494.496 649.979 486.997 687.335 467.103 714.696C447.201 739.568 419.85 749.5 400 749.5C375.204 749.5 352.879 734.623 342.954 717.287C335.546 697.488 340.5 675.23 357.825 660.38L357.84 660.367L357.854 660.354C367.658 650.549 382.342 650.549 392.146 660.354C401.951 670.158 401.951 684.842 392.146 694.646L389.959 696.834L389.686 697.107L389.651 697.142L389.647 697.146L389.646 697.146L389.646 697.147L389.645 697.148ZM422.854 102.146L422.583 101.876L422.252 102.066C413.452 107.094 400.871 116.527 392.375 131.946C383.871 147.379 379.486 168.761 387.016 197.626L387.016 197.626L387.019 197.637C397.019 232.637 404.515 260.124 409.512 282.608L409.72 283.545L410.369 282.838C437.962 252.736 450.5 217.612 450.5 175C450.5 134.834 432.92 112.213 422.854 102.146ZM304.668 537.874L304.675 537.88C322.229 552.927 352.347 573.005 400.014 570.5C410.061 570.498 422.594 567.991 435.058 565.498L435.098 565.49L435.5 565.41V565C435.5 558.683 434.236 553.006 432.669 547.366C432.23 545.784 431.767 544.207 431.302 542.621C430.104 538.536 428.887 534.386 427.99 529.902L427.986 529.879L427.979 529.856L405.479 454.856L405.261 454.131L404.68 454.616C389.627 467.16 377.029 484.762 374.505 502.429L374.5 502.464V502.5C374.5 508.542 370.871 514.031 365.649 517.717C360.428 521.402 353.691 523.228 347.598 522.01L347.549 522H347.5C341.458 522 335.969 518.371 332.283 513.149C328.598 507.928 326.772 501.191 327.99 495.098C335.459 457.754 360.365 425.356 392.785 402.911L393.141 402.664L392.947 402.276C388.787 393.956 386.368 383.892 384.218 374.944C383.801 373.206 383.393 371.511 382.985 369.879L382.834 369.274L382.276 369.553C379.759 370.811 376.621 372.694 373.507 374.563L373.493 374.571C370.362 376.45 367.255 378.313 364.776 379.553L364.769 379.557C335.984 394.575 314.054 410.859 299.313 427.481C284.586 444.088 277.013 461.062 277 477.459C274.486 492.669 282.09 517.805 304.668 537.874ZM482.015 545.121L482.179 545.776L482.757 545.429C507.875 530.358 525.5 507.711 525.5 472.5C525.5 467.378 522.954 454.735 510.334 444.627C497.688 431.997 477.527 426.999 452.475 429.5H450H449.332L449.52 430.141L474.515 515.121L474.52 515.141L478.265 530.121L482.015 545.121Z"
                                stroke="white" fill='white' strokeWidth='4'
                            />
                        </motion.svg>
                        <h1>MI</h1>
                    </div>
                    <div className="text-center absolute inset-0">
                        {/* <h1> Click and<br/> Go </h1> */}
                        {/* <progress id="loading-progress" className="w-full" value="0" max="100"></progress> */}
                        {/* {progress.toFixed(2)} */}
                    </div>
                    <div className="absolute z-[-1]">
                        <motion.svg width="800" height="800" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <motion.path
                                initial='hidden'
                                animate='visible'
                                variants={pathVariants}
                                d="M532.5 257.5L555 227.5C590 180 582.5 112.5 537.5 75C510 52.5 475 42.5 440 52.5C405 62.5 377.5 85 365 120L357.5 137.5L325 125C312.5 120 297.5 125 292.5 137.5C287.5 150 292.5 165 305 170L337.5 185L327.5 212.5L300 200C287.5 195 272.5 200 267.5 212.5C262.5 225 267.5 240 280 245L310 257.5L300 285L275 275C262.5 270 247.5 275 242.5 287.5C237.5 300 242.5 315 255 320L280 332.5L270 360L250 350C237.5 345 222.5 350 217.5 362.5C212.5 375 217.5 390 230 395L255 405C240 462.5 265 503.5 310 543.5C317.5 548.5 339 560 346.5 565V725C346.5 740 360.5 750 360.5 750H410.5H440H480.5C495.5 750 500 725 500 725V560L522 543.5C567 506 575 460 562.5 402.5L532.5 257.5Z"
                                fill="transparent"
                                stroke="white"
                            />
                        </motion.svg>
                    </div>
                </motion.div>
            </motion.div >
        </>
    )
}

export default LoadingScreen